class SynologyCard extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._hass=null,this._config=null,this._interval=null}static get properties(){return{hass:{type:Object},config:{type:Object}}}static getConfigElement(){return document.createElement("synology-card-editor")}static getStubConfig(){return{device_name:"",device_id:"",show_cpu:!0,show_memory:!0,show_network:!0,show_temperature:!0,show_buttons:!0,show_update:!0}}setConfig(n){this._config={show_cpu:!0,show_memory:!0,show_network:!0,show_temperature:!0,show_buttons:!0,show_update:!0,...n},this.render()}set hass(n){this._hass=n,this.render()}connectedCallback(){this._interval=setInterval(()=>{this.render()},2e3)}disconnectedCallback(){this._interval&&clearInterval(this._interval)}getCardSize(){return 4}_resolveDeviceName(){if(this._config?.device_name)return this._config.device_name;if(!this._config?.device_id||!this._hass)return null;const n=Object.values(this._hass.states||{});for(const t of n){const n=t.entity_id||"";if(!(t.attributes?.device_id===this._config.device_id))continue;const e=n.match(/^sensor\.(.+)_cpu_utilization_total$/);if(e)return e[1]}return null}_getEntityState(n){if(!this._hass||!n)return null;const t=this._hass.states[n];return t?t.state:null}_getEntityAttr(n,t){if(!this._hass||!n)return null;const e=this._hass.states[n];return e&&e.attributes?e.attributes[t]:null}_getEntityUnit(n){return this._getEntityAttr(n,"unit_of_measurement")||""}_isUnavailableState(n){return null==n||"unavailable"===n||"unknown"===n}_isEntityUnavailable(n){return this._isUnavailableState(this._getEntityState(n))}_isNasTurnedOff(n){const t=[n.cpuUtil,n.memUsage,n.memTotal,n.downSpeed,n.upSpeed,n.temp],e=t.filter(n=>this._isEntityUnavailable(n)).length;return this._isEntityUnavailable(n.memTotal)||e===t.length}_getDeviceLabel(n){return n.charAt(0).toUpperCase()+n.slice(1)}_renderTurnedOffCard(n){this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .off-card {\n          background: linear-gradient(145deg, #18181b 0%, #111827 100%);\n          border-radius: 20px;\n          padding: 24px 20px;\n          border: 1px solid rgba(248, 113, 113, 0.25);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.35);\n          color: #f8fafc;\n          text-align: center;\n        }\n\n        .off-icon {\n          width: 52px;\n          height: 52px;\n          margin: 0 auto 12px;\n          border-radius: 14px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: rgba(248, 113, 113, 0.12);\n          border: 1px solid rgba(248, 113, 113, 0.3);\n          color: #f87171;\n        }\n\n        .off-icon svg {\n          width: 28px;\n          height: 28px;\n        }\n\n        .off-title {\n          margin: 0;\n        }\n\n        .off-brand {\n          display: block;\n          font-size: 12px;\n          letter-spacing: 0.08em;\n          text-transform: uppercase;\n          color: #fca5a5;\n          margin-bottom: 2px;\n          font-weight: 600;\n        }\n\n        .off-device {\n          display: block;\n          margin: 0;\n          font-size: 21px;\n          font-weight: 600;\n          line-height: 1.2;\n        }\n\n        .off-status {\n          margin-top: 6px;\n          color: #fca5a5;\n          font-size: 14px;\n          font-weight: 500;\n        }\n      </style>\n      <div class="off-card">\n        <div class="off-icon">\n          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <rect x="2" y="6" width="20" height="12" rx="2"/>\n            <path d="M6 10h.01M6 14h.01"/>\n            <path d="M10 10h8M10 14h8"/>\n            <path d="M4 20L20 4"/>\n          </svg>\n        </div>\n        <h2 class="off-title">\n          <span class="off-brand">Synology</span>\n          <span class="off-device">${n}</span>\n        </h2>\n        <div class="off-status">Turned off (unavailable)</div>\n      </div>\n    `}_formatSpeed(n){if(null==n)return"--";const t=parseFloat(n);return isNaN(t)?"--":t>=1e3?(t/1e3).toFixed(1)+" GB/s":t.toFixed(1)+" MB/s"}_formatBytes(n){if(null==n)return"--";const t=parseFloat(n);return isNaN(t)?"--":t.toFixed(1)}_getColorForValue(n,t){return"cpu"===t?n>80?"#ef4444":n>50?"#f59e0b":"#22c55e":"memory"===t?n>85?"#ef4444":n>70?"#f59e0b":"#3b82f6":"temperature"===t?n>50?"#ef4444":n>40?"#f59e0b":"#22c55e":"#22c55e"}_handleAction(n,t){this._hass&&"press"===n&&this._hass.callService("button","press",{entity_id:t})}_showMoreInfo(n){this._hass&&n&&this.dispatchEvent(new CustomEvent("hass-more-info",{detail:{entityId:n},bubbles:!0,composed:!0}))}_attachEntityMoreInfoHandlers(){const n=this.shadowRoot.querySelectorAll(".entity-link[data-entity-id]");for(const t of n){const n=t.dataset.entityId;n&&(t.addEventListener("click",()=>{this._showMoreInfo(n)}),t.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this._showMoreInfo(n))}))}}_createCircularProgress(n,t,e=70){const s=(e-8)/2,i=2*s*Math.PI;return`\n      <svg width="${e}" height="${e}" class="circular-progress" viewBox="0 0 ${e} ${e}">\n        <circle\n          cx="${e/2}"\n          cy="${e/2}"\n          r="${s}"\n          fill="none"\n          stroke="rgba(255,255,255,0.1)"\n          stroke-width="6"\n        />\n        <circle\n          cx="${e/2}"\n          cy="${e/2}"\n          r="${s}"\n          fill="none"\n          stroke="${t}"\n          stroke-width="6"\n          stroke-dasharray="${i}"\n          stroke-dashoffset="${i-n/100*i}"\n          stroke-linecap="round"\n          style="transition: stroke-dashoffset 0.5s ease;"\n        />\n      </svg>\n    `}render(){if(!this._config||!this._hass)return void(this.shadowRoot.innerHTML='<div style="padding: 20px;">Loading...</div>');const n=this._resolveDeviceName();if(!n)return void(this.shadowRoot.innerHTML='\n        <ha-card>\n          <div style="padding: 16px;">\n            No Synology device selected. Open card settings and select a device.\n          </div>\n        </ha-card>\n      ');const t={cpuUtil:`sensor.${n}_cpu_utilization_total`,cpuLoad5:`sensor.${n}_cpu_load_average_5_min`,cpuLoad15:`sensor.${n}_cpu_load_average_15_min`,cpuUser:`sensor.${n}_cpu_utilization_user`,memUsage:`sensor.${n}_memory_usage_real`,memAvail:`sensor.${n}_memory_available_real`,memTotal:`sensor.${n}_memory_total_real`,memSwap:`sensor.${n}_memory_available_swap`,downSpeed:`sensor.${n}_download_throughput`,upSpeed:`sensor.${n}_upload_throughput`,temp:`sensor.${n}_temperature_5`,update:`update.${n}_dsm_update`,reboot:`button.${n}_reboot`,shutdown:`button.${n}_shutdown`},e=this._getDeviceLabel(n);if(this._isNasTurnedOff(t))return void this._renderTurnedOffCard(e);const s=parseFloat(this._getEntityState(t.cpuUtil))||0,i=this._getEntityState(t.cpuLoad5)||"--",a=this._getEntityState(t.cpuLoad15)||"--",o=parseFloat(this._getEntityState(t.memUsage))||0,r=parseFloat(this._getEntityState(t.memAvail))||0,d=parseFloat(this._getEntityState(t.memTotal))||0,l=parseFloat(this._getEntityState(t.downSpeed))||0,c=parseFloat(this._getEntityState(t.upSpeed))||0,p=parseFloat(this._getEntityState(t.temp))||0,h=this._getEntityState(t.update),g=this._getEntityAttr(t.update,"installed_version")||"Unknown",u="on"===h,v=this._getColorForValue(s,"cpu"),b=this._getColorForValue(o,"memory"),f=this._getColorForValue(p,"temperature"),w=p>50?"Hot":p>40?"Warm":"Normal";this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          display: block;\n          width: 100%;\n          min-width: 0;\n        }\n        \n        .card {\n          background: linear-gradient(145deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);\n          border-radius: 20px;\n          padding: 20px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          color: white;\n          width: 100%;\n          min-width: 0;\n          box-sizing: border-box;\n          container-type: inline-size;\n        }\n        \n        .header {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          padding-bottom: 16px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          margin-bottom: 16px;\n        }\n        \n        .icon-container {\n          width: 56px;\n          height: 56px;\n          border-radius: 16px;\n          background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(6, 182, 212, 0.2));\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        \n        .icon-container svg {\n          width: 32px;\n          height: 32px;\n          color: #22d3ee;\n        }\n        \n        .title {\n          flex: 1;\n        }\n        \n        .title h2 {\n          margin: 0;\n        }\n\n        .title-brand {\n          display: block;\n          font-size: 11px;\n          letter-spacing: 0.08em;\n          text-transform: uppercase;\n          color: #94a3b8;\n          margin-bottom: 2px;\n          font-weight: 600;\n        }\n\n        .title-device {\n          display: block;\n          margin: 0;\n          font-size: 22px;\n          font-weight: 600;\n          line-height: 1.2;\n        }\n        \n        .status-badge {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .status-dot {\n          width: 10px;\n          height: 10px;\n          border-radius: 50%;\n          background: #22c55e;\n          animation: pulse 2s infinite;\n        }\n        \n        @keyframes pulse {\n          0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }\n          50% { opacity: 0.8; box-shadow: 0 0 0 8px rgba(34, 197, 94, 0); }\n        }\n        \n        .status-text {\n          font-size: 13px;\n          color: #22c55e;\n          font-weight: 500;\n        }\n        \n        .grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(min(220px, 100%), 1fr));\n          gap: 12px;\n          margin-bottom: 16px;\n        }\n        \n        .stat-card {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 16px;\n          padding: 16px;\n          border: 1px solid rgba(255, 255, 255, 0.08);\n        }\n        \n        .stat-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 12px;\n        }\n        \n        .stat-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .stat-label-icon {\n          padding: 6px;\n          border-radius: 8px;\n        }\n        \n        .stat-label-icon svg {\n          width: 18px;\n          height: 18px;\n          display: block;\n        }\n        \n        .stat-label-text {\n          color: #94a3b8;\n          font-size: 13px;\n          font-weight: 500;\n        }\n        \n        .stat-content {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n        }\n        \n        .stat-value {\n          font-size: 32px;\n          font-weight: 700;\n          line-height: 1;\n        }\n        \n        .stat-unit {\n          font-size: 16px;\n          color: #94a3b8;\n          margin-left: 4px;\n        }\n        \n        .circular-progress {\n          transform: rotate(-90deg);\n        }\n        \n        .stat-details {\n          margin-top: 12px;\n        }\n        \n        .stat-row {\n          display: flex;\n          justify-content: space-between;\n          font-size: 12px;\n          margin-bottom: 4px;\n        }\n        \n        .stat-row-label {\n          color: #64748b;\n        }\n        \n        .stat-row-value {\n          color: #e2e8f0;\n        }\n        \n        .progress-bar {\n          width: 100%;\n          height: 6px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 3px;\n          overflow: hidden;\n          margin-top: 12px;\n        }\n        \n        .progress-fill {\n          height: 100%;\n          border-radius: 3px;\n          transition: width 0.5s ease, background 0.3s ease;\n        }\n        \n        .network-row {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          margin-bottom: 16px;\n        }\n        \n        .network-row:last-child {\n          margin-bottom: 0;\n        }\n        \n        .network-icon {\n          padding: 6px;\n          border-radius: 8px;\n        }\n        \n        .network-icon svg {\n          width: 16px;\n          height: 16px;\n          display: block;\n        }\n        \n        .network-info {\n          flex: 1;\n        }\n        \n        .network-value {\n          font-size: 20px;\n          font-weight: 600;\n        }\n        \n        .network-unit {\n          font-size: 12px;\n          color: #64748b;\n          margin-left: 4px;\n        }\n        \n        .network-bar {\n          height: 4px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 2px;\n          overflow: hidden;\n          margin-top: 6px;\n        }\n        \n        .network-bar-fill {\n          height: 100%;\n          border-radius: 2px;\n          transition: width 0.5s ease;\n        }\n        \n        .temp-container {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n        }\n        \n        .temp-status {\n          text-align: right;\n        }\n        \n        .temp-dot {\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n          margin-bottom: 4px;\n          margin-left: auto;\n        }\n        \n        .temp-label {\n          font-size: 12px;\n          font-weight: 500;\n        }\n        \n        .temp-scale {\n          margin-top: 16px;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .temp-scale-label {\n          font-size: 11px;\n          color: #64748b;\n        }\n        \n        .temp-scale-bar {\n          flex: 1;\n          height: 8px;\n          background: linear-gradient(90deg, #22c55e 0%, #f59e0b 50%, #ef4444 100%);\n          border-radius: 4px;\n          position: relative;\n        }\n        \n        .temp-indicator {\n          position: absolute;\n          width: 4px;\n          height: 16px;\n          background: white;\n          border-radius: 2px;\n          top: -4px;\n          transition: left 0.5s ease;\n        }\n        \n        .update-card {\n          background: rgba(255, 255, 255, 0.05);\n          border-radius: 12px;\n          padding: 16px;\n          border: 1px solid rgba(255, 255, 255, 0.08);\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 16px;\n        }\n        \n        .update-info {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n        \n        .update-icon {\n          padding: 8px;\n          border-radius: 8px;\n          background: rgba(34, 197, 94, 0.1);\n        }\n        \n        .update-icon svg {\n          width: 18px;\n          height: 18px;\n          display: block;\n          color: #22c55e;\n        }\n        \n        .update-text {\n          font-weight: 500;\n        }\n        \n        .update-version {\n          font-size: 12px;\n          color: #64748b;\n          margin-top: 2px;\n        }\n        \n        .update-badge {\n          background: rgba(34, 197, 94, 0.2);\n          border: 1px solid rgba(34, 197, 94, 0.3);\n          color: #22c55e;\n          padding: 6px 12px;\n          border-radius: 8px;\n          font-size: 12px;\n          font-weight: 500;\n        }\n        \n        .update-badge.warning {\n          background: rgba(245, 158, 11, 0.2);\n          border-color: rgba(245, 158, 11, 0.3);\n          color: #f59e0b;\n        }\n\n        .entity-link {\n          cursor: pointer;\n          transition: background 0.2s ease, border-color 0.2s ease;\n        }\n\n        .stat-card.entity-link:hover,\n        .update-card.entity-link:hover {\n          background: rgba(255, 255, 255, 0.08);\n          border-color: rgba(96, 165, 250, 0.45);\n        }\n\n        .network-row.entity-link {\n          border-radius: 10px;\n        }\n\n        .network-row.entity-link:hover {\n          background: rgba(255, 255, 255, 0.06);\n        }\n\n        .entity-link:focus-visible {\n          outline: 2px solid rgba(96, 165, 250, 0.9);\n          outline-offset: 2px;\n        }\n        \n        .buttons {\n          display: flex;\n          gap: 12px;\n        }\n        \n        .btn {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 12px 20px;\n          border-radius: 12px;\n          border: 1px solid;\n          background: transparent;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.2s ease;\n        }\n        \n        .btn svg {\n          width: 18px;\n          height: 18px;\n        }\n        \n        .btn-reboot {\n          border-color: rgba(251, 146, 60, 0.3);\n          color: #fb923c;\n          background: rgba(251, 146, 60, 0.1);\n        }\n        \n        .btn-reboot:hover {\n          background: rgba(251, 146, 60, 0.2);\n        }\n        \n        .btn-shutdown {\n          border-color: rgba(239, 68, 68, 0.3);\n          color: #ef4444;\n          background: rgba(239, 68, 68, 0.1);\n        }\n        \n        .btn-shutdown:hover {\n          background: rgba(239, 68, 68, 0.2);\n        }\n        \n        @container (max-width: 700px) {\n          .header {\n            gap: 12px;\n          }\n\n          .title-device {\n            font-size: 20px;\n          }\n\n          .grid {\n            grid-template-columns: 1fr;\n          }\n          \n          .buttons {\n            flex-direction: column;\n          }\n          \n          .btn {\n            justify-content: center;\n          }\n        }\n      </style>\n      \n      <div class="card">\n        <div class="header">\n          <div class="icon-container">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <rect x="2" y="6" width="20" height="12" rx="2"/>\n              <path d="M6 10h.01M6 14h.01"/>\n              <path d="M10 10h8M10 14h8"/>\n            </svg>\n          </div>\n          <div class="title">\n            <h2>\n              <span class="title-brand">Synology</span>\n              <span class="title-device">${e}</span>\n            </h2>\n            <div class="status-badge">\n              <span class="status-dot"></span>\n              <span class="status-text">Online</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="grid">\n          ${!1!==this._config.show_cpu?`\n          <div class="stat-card entity-link" data-entity-id="${t.cpuUtil}" role="button" tabindex="0">\n            <div class="stat-header">\n              <div class="stat-label">\n                <div class="stat-label-icon" style="background: rgba(34, 197, 94, 0.1);">\n                  <svg viewBox="0 0 24 24" fill="none" stroke="${v}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <rect x="4" y="4" width="16" height="16" rx="2"/>\n                    <rect x="9" y="9" width="6" height="6"/>\n                    <path d="M15 2v2M15 20v2M2 15h2M2 9h2M20 15h2M20 9h2M9 2v2M9 20v2"/>\n                  </svg>\n                </div>\n                <span class="stat-label-text">CPU</span>\n              </div>\n            </div>\n            <div class="stat-content">\n              <div>\n                <span class="stat-value" style="color: ${v};">${s.toFixed(1)}</span>\n                <span class="stat-unit">%</span>\n              </div>\n              ${this._createCircularProgress(s,v)}\n            </div>\n            <div class="stat-details">\n              <div class="stat-row">\n                <span class="stat-row-label">Load 5m</span>\n                <span class="stat-row-value">${i}</span>\n              </div>\n              <div class="stat-row">\n                <span class="stat-row-label">Load 15m</span>\n                <span class="stat-row-value">${a}</span>\n              </div>\n            </div>\n          </div>\n          `:""}\n          \n          ${!1!==this._config.show_memory?`\n          <div class="stat-card entity-link" data-entity-id="${t.memUsage}" role="button" tabindex="0">\n            <div class="stat-header">\n              <div class="stat-label">\n                <div class="stat-label-icon" style="background: rgba(59, 130, 246, 0.1);">\n                  <svg viewBox="0 0 24 24" fill="none" stroke="${b}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M6 19v-3M10 19v-6M14 19v-9M18 19V5"/>\n                  </svg>\n                </div>\n                <span class="stat-label-text">Memory</span>\n              </div>\n            </div>\n            <div class="stat-content">\n              <div>\n                <span class="stat-value" style="color: ${b};">${o.toFixed(1)}</span>\n                <span class="stat-unit">%</span>\n              </div>\n              ${this._createCircularProgress(o,b)}\n            </div>\n            <div class="stat-details">\n              <div class="stat-row">\n                <span class="stat-row-label">Used</span>\n                <span class="stat-row-value">${this._formatBytes(d-r)} / ${this._formatBytes(d)} GB</span>\n              </div>\n            </div>\n            <div class="progress-bar">\n              <div class="progress-fill" style="width: ${o}%; background: ${b};"></div>\n            </div>\n          </div>\n          `:""}\n          \n          ${!1!==this._config.show_network?`\n          <div class="stat-card">\n            <div class="stat-header">\n              <div class="stat-label">\n                <div class="stat-label-icon" style="background: rgba(6, 182, 212, 0.1);">\n                  <svg viewBox="0 0 24 24" fill="none" stroke="#06b6d4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M5 12.55a11 11 0 0 1 14.08 0M1.42 9a16 16 0 0 1 21.16 0M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01"/>\n                  </svg>\n                </div>\n                <span class="stat-label-text">Network</span>\n              </div>\n            </div>\n            <div class="network-row entity-link" data-entity-id="${t.downSpeed}" role="button" tabindex="0">\n              <div class="network-icon" style="background: rgba(34, 197, 94, 0.1);">\n                <svg viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>\n                </svg>\n              </div>\n              <div class="network-info">\n                <div>\n                  <span class="network-value">${l.toFixed(1)}</span>\n                  <span class="network-unit">MB/s</span>\n                </div>\n                <div class="network-bar">\n                  <div class="network-bar-fill" style="width: ${Math.min(100,l/1.25*100)}%; background: linear-gradient(90deg, #22c55e, #4ade80);"></div>\n                </div>\n              </div>\n            </div>\n            <div class="network-row entity-link" data-entity-id="${t.upSpeed}" role="button" tabindex="0">\n              <div class="network-icon" style="background: rgba(59, 130, 246, 0.1);">\n                <svg viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>\n                </svg>\n              </div>\n              <div class="network-info">\n                <div>\n                  <span class="network-value">${c.toFixed(1)}</span>\n                  <span class="network-unit">MB/s</span>\n                </div>\n                <div class="network-bar">\n                  <div class="network-bar-fill" style="width: ${Math.min(100,c)}%; background: linear-gradient(90deg, #3b82f6, #60a5fa);"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n          `:""}\n          \n          ${!1!==this._config.show_temperature?`\n          <div class="stat-card entity-link" data-entity-id="${t.temp}" role="button" tabindex="0">\n            <div class="stat-header">\n              <div class="stat-label">\n                <div class="stat-label-icon" style="background: rgba(${"#22c55e"===f?"34, 197, 94":"#f59e0b"===f?"245, 158, 11":"239, 68, 68"}, 0.1);">\n                  <svg viewBox="0 0 24 24" fill="none" stroke="${f}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/>\n                  </svg>\n                </div>\n                <span class="stat-label-text">Temperature</span>\n              </div>\n            </div>\n            <div class="temp-container">\n              <div>\n                <span class="stat-value" style="color: ${f};">${p.toFixed(0)}</span>\n                <span class="stat-unit">°C</span>\n              </div>\n              <div class="temp-status">\n                <div class="temp-dot" style="background: ${f};"></div>\n                <div class="temp-label" style="color: ${f};">${w}</div>\n              </div>\n            </div>\n            <div class="temp-scale">\n              <span class="temp-scale-label">35°C</span>\n              <div class="temp-scale-bar">\n                <div class="temp-indicator" style="left: calc(${Math.min(100,Math.max(0,(p-30)/30*100))}% - 2px);"></div>\n              </div>\n              <span class="temp-scale-label">60°C</span>\n            </div>\n          </div>\n          `:""}\n        </div>\n        \n        ${!1!==this._config.show_update&&u?`\n        <div class="update-card entity-link" data-entity-id="${t.update}" role="button" tabindex="0">\n          <div class="update-info">\n            <div class="update-icon">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                <polyline points="20 6 9 17 4 12"/>\n              </svg>\n            </div>\n            <div>\n              <div class="update-text">DSM Update</div>\n              <div class="update-version">Version ${g}</div>\n            </div>\n          </div>\n          <div class="update-badge warning">\n            Update Available\n          </div>\n        </div>\n        `:""}\n        \n        ${!1!==this._config.show_buttons?'\n        <div class="buttons">\n          <button class="btn btn-reboot" id="reboot-btn">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>\n              <path d="M3 3v5h5"/>\n            </svg>\n            Reboot\n          </button>\n          <button class="btn btn-shutdown" id="shutdown-btn">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M12 2v10M18.4 6.6a9 9 0 1 1-12.77.04"/>\n            </svg>\n            Shutdown\n          </button>\n        </div>\n        ':""}\n      </div>\n    `;const m=this.shadowRoot.getElementById("reboot-btn"),x=this.shadowRoot.getElementById("shutdown-btn");this._attachEntityMoreInfoHandlers(),m&&m.addEventListener("click",()=>{confirm("Are you sure you want to reboot the NAS?")&&this._handleAction("press",t.reboot)}),x&&x.addEventListener("click",()=>{confirm("Are you sure you want to shutdown the NAS?")&&this._handleAction("press",t.shutdown)})}}customElements.get("synology-card")||customElements.define("synology-card",SynologyCard),window.customCards=window.customCards||[],window.customCards.push({type:"synology-card",name:"Synology DSM Card",description:"A beautiful card to monitor Synology NAS devices"});class SynologyCardEditor extends HTMLElement{setConfig(n){this._config={show_cpu:!0,show_memory:!0,show_network:!0,show_temperature:!0,show_buttons:!0,show_update:!0,...n},this._render()}set hass(n){this._hass=n,this._render()}_deriveDeviceNameFromDeviceId(n){if(!this._hass||!n)return null;const t=Object.values(this._hass.states||{});for(const e of t){const t=e.entity_id||"";if(!(e.attributes?.device_id===n))continue;const s=t.match(/^sensor\.(.+)_cpu_utilization_total$/);if(s)return s[1]}return null}_valueChanged(n){if(!this._config||!this._hass)return;const t=n.target,e=t.configValue;if(!e)return;let s;s="boolean"==typeof t.checked?t.checked:n.detail?.value??t.value;const i={...this._config,[e]:s};if("device_id"===e){const n=this._deriveDeviceNameFromDeviceId(s);n?i.device_name=n:delete i.device_name}this._config=i,this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:i},bubbles:!0,composed:!0})),this._render()}_render(){if(!this._config||!this._hass)return;this.innerHTML='\n      <style>\n        .card-config {\n          display: grid;\n          gap: 12px;\n        }\n\n        .toggles {\n          display: grid;\n          gap: 8px;\n        }\n\n        .toggle-row {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .hint {\n          color: var(--secondary-text-color);\n          font-size: 12px;\n        }\n      </style>\n      <div class="card-config">\n        <ha-device-picker id="device_picker" label="Synology Device"></ha-device-picker>\n        <div class="hint">\n          Pick the Synology DSM device that provides entities such as CPU utilization.\n        </div>\n        <div class="toggles">\n          <div class="toggle-row">\n            <span>Show CPU</span>\n            <ha-switch id="show_cpu"></ha-switch>\n          </div>\n          <div class="toggle-row">\n            <span>Show Memory</span>\n            <ha-switch id="show_memory"></ha-switch>\n          </div>\n          <div class="toggle-row">\n            <span>Show Network</span>\n            <ha-switch id="show_network"></ha-switch>\n          </div>\n          <div class="toggle-row">\n            <span>Show Temperature</span>\n            <ha-switch id="show_temperature"></ha-switch>\n          </div>\n          <div class="toggle-row">\n            <span>Show Update</span>\n            <ha-switch id="show_update"></ha-switch>\n          </div>\n          <div class="toggle-row">\n            <span>Show Buttons</span>\n            <ha-switch id="show_buttons"></ha-switch>\n          </div>\n        </div>\n      </div>\n    ';const n=this.querySelector("#device_picker");n.hass=this._hass,n.value=this._config.device_id||"",n.configValue="device_id",n.includeDomains=["button","sensor","update"],n.addEventListener("value-changed",this._valueChanged.bind(this));const t=["show_cpu","show_memory","show_network","show_temperature","show_update","show_buttons"];for(const n of t){const t=this.querySelector(`#${n}`);t.checked=!1!==this._config[n],t.configValue=n,t.addEventListener("change",this._valueChanged.bind(this))}}}customElements.get("synology-card-editor")||customElements.define("synology-card-editor",SynologyCardEditor);